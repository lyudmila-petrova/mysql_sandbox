# Песочница MySQL

## Инструкция

#### Шаг 01. Задаем переменные окружения

Из корня проекта выполнить команду:
```
$ cp .env.template .env
``` 
В файле заданы параметры для запуска контейнера с базой данных.

#### Шаг 02. Скачать дамп базы

[Дамп базы](https://yadi.sk/d/DUbsyDvkNZ9Pfw) положить в `docker/db/dump`

#### Шаг 03. Запустить контейнер и подключиться к нему

Запускаем контейнеры
```
$ docker-compose up -d
```
Подключаемся в консоль запущенного контейнера
```
$ docker-compose exec db bash
```

#### Шаг 04. Создаем таблицы БД из файла с дампом

Команды выполяем внутри запущенного контейнера.

Проверяем, что файл с дампом лежит там, где мы его ожидаем:
```
# ls /dump
movielens.sql
```

Запускаем восстановление из дампа:
```
# mysql -uroot -prootpswd movielens < /dump/movielens.sql
```

## Задания на самостоятельную работу

#### Задание 01. Составить запросы

    1. Выбрать произвольные 10 фильмов
    2. Выбрать фильмы, содержащие в названии sun (регистронезависимый поиск)
    3. Выбрать 20 фильмов 2008 года
    4. Показать, к каким жанрам относится фильм "88 минут" (название на английском)
    5. Показать ссылки на фильм "Forrest Gump" в imdb  
    6. Показать фильмы с "Leonardo DiCaprio" (через теги)
    7. Сколько было фильмов в 2009 году
    8. Какой рейтинг в среднем у комедий 2007 года
    9. Кто из пользователей оставил больше всего оценок фильмам
    10. Выбрать лучший боевик (action) всех времен и народов
    11. Выбрать из базы фильмы с id из множества (3, 4, 5, 6, 7) в фиксированном порядке (5, 4, 6, 3, 7)

Некоторые из запросов будут выполняться медленно. Можно подумать/погуглить почему так происходит и что с этим можно сделать.

#### Задание 02. Выгрузить дамп схемы данных

С помощью утилиты `mysqldump` выгрузить только схему (без данных)

#### Задание 03. Подключиться к контейнеру с БД через DataGrip или другую IDE

Установить программу (если ещё не установлена), найти способ подключиться и выполнять запросы.
